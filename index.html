<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flor Express - Haz que cada detalle florezca</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'verde-hoja': '#C3D600',
                        'magenta-flor': '#C33A94'
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="css/main.css">
    <style>
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 100%;
            max-width: 420px;
            position: relative;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 18px;
            cursor: pointer;
            color: #666;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #C33A94;
            margin-bottom: 1rem;
        }

        .modal-input {
            width: 100%;
            padding: .75rem;
            margin-bottom: .75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .modal-btn-primary {
            background: #C3D600;
            color: white;
            width: 100%;
            padding: .8rem;
            border-radius: 8px;
            font-weight: 600;
            margin-bottom: .5rem;
        }

        .modal-btn-secondary {
            background: #C33A94;
            color: white;
            width: 100%;
            padding: .8rem;
            border-radius: 8px;
            font-weight: 600;
            margin-bottom: .5rem;
        }

        .modal-btn-link {
            display: block;
            text-align: center;
            color: #C33A94;
            font-size: .9rem;
            margin-top: .5rem;
            cursor: pointer;
        }
    </style>

</head>

<body class="bg-gray-50">

    <!-- Navigation -->
    <nav class="gradient-bg shadow-lg fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex items-center">
                        <img src="img/logo.jpg" alt="logo" class="w-12 h-12 rounded-full object-cover mr-3">
                        <span class="text-white text-2xl font-bold">Flor Express</span>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#inicio"
                            class="text-white hover:text-gray-200 px-3 py-2 rounded-md text-sm font-medium smooth-transition">Inicio</a>
                        <a href="#catalogo"
                            class="text-white hover:text-gray-200 px-3 py-2 rounded-md text-sm font-medium smooth-transition">Cat√°logo</a>
                        <a href="#nosotros"
                            class="text-white hover:text-gray-200 px-3 py-2 rounded-md text-sm font-medium smooth-transition">Nosotros</a>
                        <a href="#como-funciona"
                            class="text-white hover:text-gray-200 px-3 py-2 rounded-md text-sm font-medium smooth-transition">C√≥mo
                            Funciona</a>
                        <a href="#contacto"
                            class="text-white hover:text-gray-200 px-3 py-2 rounded-md text-sm font-medium smooth-transition">Contacto</a>
                        <button onclick="showLogin()"
                            class="bg-magenta-flor text-white px-4 py-2 rounded-lg hover:bg-pink-600 smooth-transition">Iniciar
                            Sesi√≥n</button>
                    </div>
                </div>
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-white">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="md:hidden hidden bg-verde-hoja">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#inicio" class="text-white block px-3 py-2 rounded-md text-base font-medium">Inicio</a>
                <a href="#catalogo" class="text-white block px-3 py-2 rounded-md text-base font-medium">Cat√°logo</a>
                <a href="#nosotros" class="text-white block px-3 py-2 rounded-md text-base font-medium">Nosotros</a>
                <a href="#como-funciona" class="text-white block px-3 py-2 rounded-md text-base font-medium">C√≥mo
                    Funciona</a>
                <a href="#contacto" class="text-white block px-3 py-2 rounded-md text-base font-medium">Contacto</a>
                <button onclick="showLogin()"
                    class="bg-magenta-flor text-white block w-full text-left px-3 py-2 rounded-md text-base font-medium">Iniciar
                    Sesi√≥n</button>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section id="inicio" class="pt-16 gradient-bg min-h-screen flex items-center justify-center text-center relative">
        <div class="absolute inset-0">
            <img src="img/banner2.png" class="w-full h-full object-cover opacity-80">
        </div>
        <div class="absolute inset-0 bg-black bg-opacity-40"></div>

        <div class="relative z-10 max-w-4xl mx-auto px-4 py-20">
            <img src="img/logo.jpg" class="w-80 h-80 rounded-full object-cover shadow-lg border-4 border-white mx-auto">
            <h1 class="text-5xl md:text-7xl font-bold text-white">Flor Express</h1>
            <p class="text-2xl md:text-3xl text-white">"Haz que cada detalle florezca"</p>
            <div class="flex flex-wrap justify-center gap-4 mt-6">
                <a href="#catalogo"
                    class="bg-magenta-flor text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-pink-600 smooth-transition pulse-custom">Ver
                    Cat√°logo</a>
                <a href="#app"
                    class="bg-white text-verde-hoja px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 smooth-transition">Descargar
                    App</a>
            </div>
        </div>
    </section>

    <!-- Cat√°logo -->
    <section id="catalogo" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Nuestro Cat√°logo</h2>
                <p class="text-xl text-gray-600">Encuentra las flores perfectas para cada ocasi√≥n</p>
            </div>

            <div class="mb-12 flex flex-wrap justify-center gap-4">
                <button class="filter-btn bg-verde-hoja text-white px-6 py-2 rounded-full">Todos</button>
                <button class="filter-btn bg-gray-200 text-gray-700 px-6 py-2 rounded-full">Ramos</button>
                <button class="filter-btn bg-gray-200 text-gray-700 px-6 py-2 rounded-full">Funerarios</button>
                <button class="filter-btn bg-gray-200 text-gray-700 px-6 py-2 rounded-full">Eventos</button>
                <button class="filter-btn bg-gray-200 text-gray-700 px-6 py-2 rounded-full">Regalos</button>
            </div>

            <!-- DONDE SE INSERTAN LOS PRODUCTOS -->
            <div id="lista-productos" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            </div>
        </div>
    </section>

    <!-- Nosotros Section -->
    <section id="nosotros" class="py-20 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Sobre Nosotros</h2>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">

                <!-- Misi√≥n -->
                <div class="fade-in">
                    <div class="bg-white p-8 rounded-lg shadow-lg flex flex-col h-full">
                        <div class="text-4xl mb-4">üéØ</div>
                        <h3 class="text-2xl font-bold text-magenta-flor mb-4">Nuestra Misi√≥n</h3>
                        <p class="text-gray-600 leading-relaxed">
                            Conectar corazones a trav√©s de flores frescas y hermosas, brindando un servicio de entrega
                            r√°pido y confiable que permita expresar sentimientos y emociones en los momentos m√°s
                            importantes de la vida.
                        </p>
                    </div>
                </div>

                <!-- Visi√≥n -->
                <div class="fade-in">
                    <div class="bg-white p-8 rounded-lg shadow-lg flex flex-col h-full">
                        <div class="text-4xl mb-4">üëÅÔ∏è</div>
                        <h3 class="text-2xl font-bold text-magenta-flor mb-4">Nuestra Visi√≥n</h3>
                        <p class="text-gray-600 leading-relaxed">
                            Ser la plataforma l√≠der en entrega de flores, reconocida por la calidad de nuestros
                            productos, la innovaci√≥n en nuestros servicios y la satisfacci√≥n total de nuestros clientes
                            en toda la regi√≥n.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto Section -->
    <section id="contacto" class="py-20 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Cont√°ctanos</h2>
                <p class="text-xl text-gray-600">Estamos aqu√≠ para ayudarte</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">

                <!-- Informaci√≥n de Contacto -->
                <div class="bg-white p-8 rounded-lg shadow-lg flex flex-col h-full">
                    <h3 class="text-xl font-bold text-magenta-flor mb-4">Informaci√≥n de Contacto</h3>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üìç</span>
                            <span>Calle 123 #45-67, Bogot√°, Colombia</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üìû</span>
                            <span>+57 300 123 4567</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">‚úâÔ∏è</span>
                            <span>info@florexpress.com</span>
                        </div>
                    </div>
                </div>

                <!-- S√≠guenos -->
                <div class="bg-white p-8 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold text-magenta-flor mb-4">S√≠guenos</h3>
                    <div class="flex space-x-4 items-center">
                        <a href="#"><img src="img/facebook.png" class="w-16 h-16"></a>
                        <a href="#"><img src="img/instagram.png" class="w-16 h-16"></a>
                        <a href="#"><img src="img/gorjeo.png" class="w-16 h-16"></a>
                        <a href="#"><img src="img/tik-tok.png" class="w-16 h-16"></a>
                    </div>
                </div>

            </div>
        </div>
    </section>


    <!-- App -->
    <section id="app" class="py-20 gradient-bg">
        ... <!-- SIN CAMBIOS -->
    </section>

    <!-- Modales -->
    <!-- Modal Login -->
    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close" onclick="hideModals()">‚úñ</button>
            <h2 class="modal-title">Iniciar Sesi√≥n</h2>

            <input type="email" id="login-email" placeholder="Correo electr√≥nico" class="modal-input">
            <input type="password" id="login-password" placeholder="Contrase√±a" class="modal-input">

            <button onclick="showDashboard()" class="modal-btn-primary">Entrar</button>
            <button onclick="showRegister()" class="modal-btn-link">Crear cuenta</button>
        </div>
    </div>

    <!-- Modal Registro -->
    <div id="register-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close" onclick="hideModals()">‚úñ</button>
            <h2 class="modal-title">Crear Cuenta</h2>

            <input type="email" id="register-email" placeholder="Correo electr√≥nico" class="modal-input">
            <input type="password" id="register-password" placeholder="Contrase√±a" class="modal-input">

            <button class="modal-btn-secondary">Registrar</button>
            <button onclick="showLogin()" class="modal-btn-link">Ya tengo cuenta</button>
        </div>
    </div>

    <!-- Modal Recuperar Contrase√±a -->
    <!-- Modal Recuperar Contrase√±a -->
    <div id="password-recovery-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close" onclick="hideModals()">‚úñ</button>

            <h2 class="modal-title">Recuperar Contrase√±a</h2>

            <input type="email" id="recovery-email" placeholder="Ingresa tu correo" class="modal-input">

            <button class="modal-btn-primary">Enviar enlace</button>

            <button onclick="showLogin()" class="modal-btn-link">Volver al login</button>
        </div>
    </div>



    <!-- SCRIPT: CARGA PRODUCTOS DIN√ÅMICOS -->
    <script>
        fetch("actions/get_catalogo.php")
            .then(res => res.json())
            .then(productos => {
                const lista = document.getElementById("lista-productos");

                if (!productos.length) {
                    lista.innerHTML = `
        <p class='col-span-4 text-center text-gray-400 text-lg'>
          No hay productos disponibles en este momento
        </p>`;
                    return;
                }

                lista.innerHTML = productos.slice(0, 4).map(p => `
      <div class="bg-white rounded-lg shadow-lg overflow-hidden card-hover">
        <div class="h-48 w-full overflow-hidden">

          <img src="${p.imagen_principal.startsWith('http') ? p.imagen_principal : './' + p.imagen_principal}" 
               class="w-full h-full object-cover">

        </div>
        <div class="p-6">
          <h3 class="text-xl font-semibold mb-2">${p.nombre_articulo}</h3>
          <p class="text-gray-600 mb-4">Producto disponible</p>
          <div class="flex justify-between items-center">
            <span class="text-2xl font-bold text-magenta-flor">
              $${parseFloat(p.precio).toFixed(2)} MXN
            </span>
            <button onclick="comprar(${p.id_articulo})" class="bg-verde-hoja text-white px-4 py-2 rounded-lg hover:bg-green-600 smooth-transition">
        Comprar
    </button>
          </div>
        </div>
      </div>
    `).join("");
            });

        function comprar(id) {
            window.location.href = "login.php?redir=producto&id=" + id;
        }
    </script>

    <script>
        function comprar(idArticulo) {
            fetch('session_status.php')
                .then(res => res.json())
                .then(data => {
                    if (!data.logged_in) {
                        showLogin(); // abrir modal login
                        return;
                    }

                    // Ya hay sesi√≥n ‚Üí agregar al carrito
                    fetch('actions/agregar_carrito.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ id_articulo: idArticulo })
                    })
                        .then(res => res.json())
                        .then(resp => {
                            if (resp.success) {
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Agregado al carrito',
                                    text: 'Puedes seguir comprando.',
                                    timer: 1500,
                                    showConfirmButton: false
                                });
                            } else {
                                Swal.fire('Error', resp.message, 'error');
                            }
                        });
                });
        }
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/main.js"></script>
    <script src="js/auth.js?v=3"></script>

    <script>
        fetch("actions/get_catalogo.php")
            .then(res => res.json())
            .then(productos => {
                const lista = document.getElementById("lista-productos");

                if (!productos.length) {
                    lista.innerHTML = `
            <p class='col-span-4 text-center text-gray-400 text-lg'>
            No hay productos disponibles en este momento
            </p>`;
                    return;
                }

                lista.innerHTML = productos.slice(0, 4).map(p => `
        <div class="bg-white rounded-lg shadow-lg overflow-hidden card-hover">
            <div class="h-48 w-full overflow-hidden">
                <img src="${p.imagen_principal.startsWith('http') ? p.imagen_principal : './' + p.imagen_principal}" 
                class="w-full h-full object-cover">
            </div>
            <div class="p-6">
                <h3 class="text-xl font-semibold mb-2">${p.nombre_articulo}</h3>
                <p class="text-gray-600 mb-4">Producto disponible</p>
                <div class="flex justify-between items-center">
                    <span class="text-2xl font-bold text-magenta-flor">
                    $${parseFloat(p.precio).toFixed(2)} MXN
                    </span>
                    <button onclick="comprar(${p.id_articulo})" class="bg-verde-hoja text-white px-4 py-2 rounded-lg hover:bg-green-600 smooth-transition">
                        Comprar
                    </button>
                </div>
            </div>
        </div>
        `).join("");
            });

        function comprar(idArticulo) {
            fetch('session_status.php')
                .then(res => res.json())
                .then(data => {
                    if (!data.logged_in) {
                        showLogin();
                        return;
                    }

                    fetch('actions/agregar_carrito.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ id_articulo: idArticulo })
                    })
                        .then(res => res.json())
                        .then(resp => {
                            if (resp.success) {
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Agregado al carrito',
                                    text: 'Puedes seguir comprando.',
                                    timer: 1500,
                                    showConfirmButton: false
                                });
                            } else {
                                Swal.fire('Error', resp.message, 'error');
                            }
                        });
                });
        }
    </script>


</body>

</html>